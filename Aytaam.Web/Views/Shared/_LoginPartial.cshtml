@using Microsoft.AspNetCore.Identity
@using Aytaam.Data.DbEntities
@inject SignInManager<Account> SignInManager
@inject UserManager<Account> OrphanManager
@{
    Account? currentOrphan = await OrphanManager.GetUserAsync(User);
}
<style>
    [data-kt-sticky-enabled="true"] #userinfo a {
        color: black !important
    }
</style>
@if (SignInManager.IsSignedIn(User))
{

    <div class="app-navbar-item ms-1 ms-md-3" id="kt_header_user_menu_toggle">
        <!--begin::Menu wrapper-->
        <div class="cursor-pointer  symbol symbol-30px symbol-md-40px" data-kt-menu-attach="parent" data-kt-menu-placement="bottom-end" data-kt-menu-trigger="{default: 'click', lg: 'hover'}">
            <div class=" px-3">
                <div class=" d-flex align-items-center px-3">
                    <!--begin::Avatar-->
                    <div class="symbol symbol-50px me-5">
                        <img src="@currentOrphan?.ImagePath" alt="Logo">
                    </div>
                    <!--end::Avatar-->
                    <!--begin::Orphanname-->
                    <div class="d-flex flex-column">
                        <div class="fw-bold d-flex align-items-center fs-6" id="userinfo">
                            <a href="/admin/orphan/MyProfile" class="text-white text-hover-success d-flex flex-column">
                                @currentOrphan?.FullName
                                <small class="fw-light mt-2 ">@currentOrphan?.Email</small>
                            </a>
                        </div>
                    </div>
                    <!--end::Orphanname-->
                </div>
            </div>
        </div>
        <!--begin::Orphan orphan menu-->
        <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg menu-state-color fw-semibold py-4 fs-6 w-200px" data-kt-menu="true">
            <div class="menu-item px-5">
                <a asp-action="Index" asp-area="Admin" asp-controller="Orphan" class="menu-link text-hover-success  px-5">
                    لوحة التحكم
                </a>
            </div>
            <div class="separator my-2"></div>
            <!--end::Menu item-->
            <!--begin::Menu item-->
            <div class="menu-item px-5">
                <form asp-area="Identity" asp-controller="Accounts" asp-action="Logout" method="post">
                    <button type="submit" style="background:white;color:black;" class="menu-link border-0 text-hover-success px-5">
                        تسجيل خروج
                    </button>
                </form>
            </div>
            <!--end::Menu item-->
        </div>
        <!--end::Orphan orphan menu-->

    </div>


}
else
{
    <div class="d-flex">
        <div class="text-end ms-1">
            <a asp-action="login" asp-controller="Accounts" asp-area="identity" class="btn btn-success">تسجيل دخول كمدير موقع</a>
        </div>

    </div>
}
@* <a id="manage" class="nav-link text-dark" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage">Hello @OrphanManager.GetOrphanName(Orphan)!</a>
<li class="nav-item">
    <form id="logoutForm" class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
        <button id="logout" type="submit" class="nav-link btn btn-link text-dark border-0">Logout</button>
    </form>
</li> *@